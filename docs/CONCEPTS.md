我们的目标是创建一个 multi-agent 的 trading bot，它能够根据市场情况做出决策，并执行交易。

项目使用 uv 创建和管理，使用 uv 运行，使用 dotenv 管理环境变量，使用 pytest 进行测试。

在设计上需要是分层和模块化的，应该能够兼容支持相同的策略在任意交易平台运行。

不过我们当前第一版只需要支持 WEEX 交易平台。

然而当前 Binance 是交易量最大的交易所，拥有定价权，所以所有的数据源需要使用 Binance 的。

无论在任何交易所运行策略，我们都需要使用 binance 的 rest api 和 websocket 来获取市场数据。

包括 

K线
ticker
orderbook
trades
longshortratio
funding rate
mark price
open interest
liquidation 爆仓推送

我们在项目中安装了 talipp 库，所以我们可以使用 talipp 来计算技术指标。

订单、仓位管理等需要使用目标交易所的，请同时使用 rest api 和 websocket 来获取和同步实时的数据。

我们的项目必须模块化、分层化、具备良好的可扩展性。

目前计划有：

数据模块：负责从 binance 获取最新的市场数据
指标模块：负责使用实时数据计算技术指标
机械策略模块：在某些市场数据、指标等达到一些预先设置的条件时，比如价格到达某个位置、RSI 超买、MACD 金叉，这些固定的情形发生时，触发一个机械单因子策略信号。
Agent 模块：我们使用langchain来构建agent，当单因子策略信号触发时，把信号具体的内容，加上当前实时的所有市场数据、指标数据、用户挂单、仓位实时信息，发送给 Agent，由 agent 判断是否开仓、平仓、挂单、撤单、加仓、减仓、止损、或者继续观察等，agent 做出的反馈必须用 json 规范格式化结构化标准化，转换为策略程序可以执行理解的命令
账户与执行模块：负责管理用户的账户信息、仓位信息、挂单信息等，必须保证同步最新的实时的数据，并保证数据实时更新、ws 不断连，自动重连，根据 Agent 或者风控模块的命令，执行具体的交易操作，尤其要确保撤单、平仓、加减仓等操作稳定且成功执行。
风控模块：这部分是独立于 agent 之外的机械风控模块，当市场数据或者用户的仓位、挂单等达到某些条件时，触发风控模块，风控模块会根据设置好的固定条件决定是否进行止损、平仓、减仓、加仓、撤单等操作。
日志模块：weex 目前正在举办 AI 大赛，所有的 AI 交易必须提供完整的日志，包括 AI 的输入、输出、解释、订单执行细节等，日志模块负责收集、存储、管理这些日志，并提供查询、导出、分析等功能。除了上传以外，我们也需要在本地 log 文件中持久化存储这些日志，以便于后续的分析和回溯。

注意我们需要一个公共的实时数据池，数据模块和账户模块需要把最新的数据同步到数据池中，在机械策略信号触发的时候，从数据池中获取实时数据的一个 snapshot 添加到 context 中，作为 agent 的输入。机械策略发出的信号需要有时间戳和队列机制，避免出现多信号混乱叠加的情况。

docs 目录下的内容都是拿来阅读和参考的，千万不要直接使用或者引用其中的代码。

对于 langchain，我们使用 langchain-anthropic 来构建 agent，并且我设置了第三方的 api 地址，https://api.minimax.io/anthropic，请基于我的配置来构建调用，不要使用 anthropic 官方的 api 地址。

在每次发送给 agent 进行判断的 context 中，需要把最近的 10 次操作记录也一并发送给 agent，以便于 agent 进行分析和判断。

